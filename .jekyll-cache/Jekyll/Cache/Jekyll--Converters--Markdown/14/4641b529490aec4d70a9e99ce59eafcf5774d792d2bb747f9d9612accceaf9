I"D<p>장고의 Static 파일에 대해 알아본다.
<!--more--></p>

<h1 id="장고의-static-파일">장고의 Static 파일</h1>
<p>장고에서 Static파일을 이용하는 방법을 알아보도록 하겠습니다. 하지만 실습에 앞서 <code class="highlighter-rouge">Static</code>파일이 무엇이지 알아보고 가도록 하겠습니다.</p>
<h3 id="static-파일이란">Static 파일이란?</h3>
<p>이미지나 CSS, JS파일 처럼 내용이 고정되어 있어, 응답을 할 때 별도의 처리 없이 파일 그대로를 보내주면 되는 파일들을 의미합니다. 즉, 사용자의 요청에 따라 내용이 바뀌는 것이 아니라 있는 파일 그대로를 보내주는 것을 의미합니다.</p>

<h3 id="static-경로-설정">Static 경로 설정</h3>
<p><code class="highlighter-rouge">Static</code> 파일을 이용하기 위해서 가장 중요한 점은 <code class="highlighter-rouge">settings.py</code>에서<code class="highlighter-rouge">django.contrib.staticfiles</code>가 INSTALLED_APPS에 포함되어 있는지 확인하는 것입니다. 기본적으로 포함되어 있지만 안될 때 확인해야할 중요 사항인건 맞습니다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'garden.apps.GardenConfig'</span><span class="p">,</span>
    <span class="s">'django.contrib.admin'</span><span class="p">,</span>
    <span class="s">'django.contrib.auth'</span><span class="p">,</span>
    <span class="s">'django.contrib.contenttypes'</span><span class="p">,</span>
    <span class="s">'django.contrib.sessions'</span><span class="p">,</span>
    <span class="s">'django.contrib.messages'</span><span class="p">,</span>
    <span class="s">'django.contrib.staticfiles'</span> <span class="c1"># 이게 빠져있어선 안됩니다!
</span><span class="p">]</span>
<span class="p">...</span>
</code></pre></div></div>
<p>이 앱이 앞으로 우리의 <code class="highlighter-rouge">Static</code>파일들을 관리해 줄 것입니다.
그럼 해당 파일의 가장 밑으로 내려가 보겠습니다.
아마도 이런 코드를 볼 수 있을 것입니다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">'/static/'</span>
</code></pre></div></div>
<p>이 코드는 <code class="highlighter-rouge">Static</code>파일을 불러올 때의 URL을 의미합니다. 만약 <code class="highlighter-rouge">profile.jpg</code>라는 이미지가 있다면</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://127.0.0.1:8000/static/profile.jpg
</code></pre></div></div>
<p>위와 같은 url을 통해 이미지 주소가 만들어 지게 됩니다.
이 <code class="highlighter-rouge">STATIC_URL</code>아래에 다음과 같은 코드를 추가해 봅니다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'staticfiles'</span><span class="p">)</span>
</code></pre></div></div>
<p>위 코드는 <code class="highlighter-rouge">Static</code>파일들이 모이는 경로를 정해주는 것입니다. 이 경우 <code class="highlighter-rouge">python manage.py collectstatic</code>이라는 명령어를 입력할 경우 <code class="highlighter-rouge">staticfiles</code>라는 폴더로 <code class="highlighter-rouge">Static</code>파일들이 모이게 될 것입니다.</p>

<p>그 아래에는 다음과 같은 코드를 추가해 봅니다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'blog'</span><span class="p">,</span> <span class="s">'static'</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div></div>
<p>위 코드는 <code class="highlighter-rouge">blog</code>라는 앱 안의 <code class="highlighter-rouge">static</code>폴더를 경로에 추가해 준 것입니다. 이러한 작업을 안할 경우 <code class="highlighter-rouge">python manage.py collectstatic</code>을 하였을 때 이 경로에 없는 폴더는 <code class="highlighter-rouge">Static</code>파일을 모으지 않게 됩니다. 그래서 이 코드를 반드시 추가해 주어야합니다.</p>

<p>사실 <code class="highlighter-rouge">STATIC_URL</code>만 하여도 <code class="highlighter-rouge">Static</code>파일들을 이용하는데에는 크게 무리가 없습니다. 왜냐하면 개발자 모드에서는 여러가지 부분들을 장고가 알아서 처리해주고 <code class="highlighter-rouge">Static</code>파일 또한 장고가 알아서 처리해주는 일 중에 하나이기 때문입니다. 하지만 배포 모드에서는 장고가 이러한 일들을 알아서 처리해 주지 않습니다. 그래서 모든 파일들을 하나로 모아주고 저희가 직접 연결시켜 주는 것입니다.</p>

:ET